<script>
  const AuthMixin = subclass =>
  
  class AuthController extends subclass {
      get bind() {
        return Object.assign(
          super.bind,
          {
            'auth-update' : '_onAuthUpdate'
          }
        );
      }

      ready() {
        super.ready();
        this._getAuthState()
            .then((e) => this._onAuthUpdate(e));
      }

      _getAuthState() {
        return this.emit('AuthModel.getAuthState');
      }

      _loginCustom(token) {
        return this.emit('AuthModel.loginCustom', token);
      }

      _loginAuth0() {
        return this.emit('AuthModel.loginAuth0');
      }

      _logout() {
        console.log('Removing user profile', localStorage.getItem('auth0-profile'));
        localStorage.removeItem('auth0-profile');
        return this.emit('AuthModel.logout');
      }

      _continueAuth0Login(hash) {
        return this.emit('AuthModel.continueAuth0Login', hash);
      }

      _initAuthRenewAuth0() {
        return this.emit('AuthModel.initAuthRenewAuth0');
      }

      _onAuthUpdate(e) {
        // implement me
      }
  }
</script>